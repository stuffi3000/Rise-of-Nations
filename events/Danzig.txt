add_namespace = danzig

country_event = {
	id = danzig.1
	fire_only_once = yes

	hidden = yes

	trigger = {
		date > 1933.1.1
		date < 1949.1.1
		tag = DNZ
		DNZ = { has_government = fascism }
		85 = { is_owned_by = DNZ }
		country_exists = GER
		NOT = {
			OR = {
				has_global_flag = DNZ_joined_germany
				has_global_flag = DNZ_stay_independence
				has_global_flag = DNZ_joined_poland
			}
		}
		GER = {
			has_war_with = POL
			NOT = { has_war_with = DNZ }
		}
	}

	immediate = {
		DNZ = {
			country_event = { id = danzig.2 hours = 2 }
		}
	}
}

#Danzig choice
country_event = {
	id = danzig.2
	title = danzig.2.t
	desc = danzig.2.d
	is_triggered_only = yes
	picture = GFX_report_event_german_speech

	option = { #Danzig join Germany
		name = danzig.2.a
		ai_chance = {
			factor = 20
			modifier = {
				factor = 100
				is_historical_focus_on = yes
			}
		}

		custom_effect_tooltip = GAME_OVER_TT

		hidden_effect = {
			GER = {
				country_event = { id = danzig.3 hours = 2 }
			}
		}
	}
	option = { #Danzig join Poland
		name = danzig.2.b
		ai_chance = {
			factor = 5
		}

		custom_effect_tooltip = GAME_OVER_TT

		hidden_effect = {
			POL = {
				country_event = { id = danzig.4 hours = 2 }
			}
		}
	}
	option = { #Danzig did nothing
		name = danzig.2.c
		ai_chance = {
			factor = 1
		}

		add_stability = -0.3
		add_political_power = -100

		hidden_effect = {
			set_global_flag = DNZ_stay_independence

			GER = {
				country_event = { id = danzig.6 hours = 2 }
			}
		}
	}
}

#Danzig join Germany
country_event = {
	id = danzig.3
	title = danzig.3.t
	desc = danzig.3.d
	is_triggered_only = yes
	picture = GFX_report_event_german_speech

	option = { #Danzig join Germany
		name = danzig.3.a
		ai_chance = {
			factor = 10
		}

		GER = {
			annex_country = { target = DNZ transfer_troops = yes }
		}
		85 = {
			add_core_of = GER
			remove_claim_by = GER
			remove_core_of = DNZ
		}
		hidden_effect = {
			set_global_flag = DNZ_joined_germany

		}
	}
}

#Danzig join Poland
country_event = {
	id = danzig.4
	title = danzig.4.t
	desc = danzig.4.d
	is_triggered_only = yes
	picture = GFX_report_event_german_speech

	option = { #Danzig join Poland
		name = danzig.4.a
		ai_chance = {
			factor = 10
		}

		POL = {
			annex_country = { target = DNZ transfer_troops = yes }
		}
		85 = {
			add_core_of = POL
			remove_core_of = DNZ
		}
		hidden_effect = {
			set_global_flag = DNZ_joined_poland

			GER = {
				country_event = { id = danzig.5 hours = 2 }
			}

		}
	}
}

country_event = {
	id = danzig.5
	title = danzig.5.t
	desc = danzig.5.d
	is_triggered_only = yes
	picture = GFX_report_event_german_speech

	option = { #Danzig joined Poland
		name = danzig.5.a
		ai_chance = {
			factor = 10
		}
	}
}

country_event = {
	id = danzig.6
	title = danzig.6.t
	desc = danzig.6.d
	is_triggered_only = yes
	picture = GFX_report_event_german_speech

	option = { #War with Danzig
		name = danzig.6.a
		ai_chance = {
			factor = 20
		}

		create_wargoal = {
			expire = 100
			type = annex_everything
			target = DNZ
		}
	}

	option = { #did nothing
		name = danzig.6.b
		ai_chance = {
			factor = 2
		}
	}
}

# Ban Nazi Party Annex
country_event = {
	id = danzig.7
	title = danzig.7.t
	desc = danzig.7.d
	is_triggered_only = yes
	picture = GFX_report_event_german_speech

	option = {
		name = danzig.7.b
		ai_chance = {
			factor = 5
		}

		custom_effect_tooltip = GAME_OVER_TT

		hidden_effect = {
			POL = {
				country_event = { id = danzig.8 hours = 2 }
			}
		}
	}

	option = {
		name = danzig.7.b
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		custom_effect_tooltip = GAME_OVER_TT

		hidden_effect = {
			POL = {
				country_event = { id = danzig.6 hours = 2 }
			}
		}
	}
}

#Autonomy Decrease
country_event = {
	id = danzig.8
	title = danzig.8.t
	desc = danzig.8.d
	is_triggered_only = yes
	picture = GFX_report_event_german_speech

	option = {
		name = danzig.8.b
		ai_chance = {
			factor = 5
		}

		set_autonomy = {
			target = DNZ
			autonomy_state = autonomy_integrated_puppet
		}
		DNZ = {
			add_popularity = {
				ideology = fascism
				popularity = -0.5
			}
		}
	}
}

#Generic annex event
country_event = {
	id = danzig.10
	title = danzig.10.t
	desc = danzig.10.d
	is_triggered_only = yes
	picture = GFX_report_event_german_speech

	option = { #Danzig join Germany
		name = danzig.10.a

		custom_effect_tooltip = GAME_OVER_TT

		GER = {
			annex_country = { target = DNZ transfer_troops = yes }
		}
		85 = {
			add_core_of = GER
			remove_claim_by = GER
			remove_core_of = DNZ
		}
		hidden_effect = {
			set_global_flag = DNZ_joined_germany
		}
	}
}
