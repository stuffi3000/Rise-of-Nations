on_actions = {

	on_capitulation = {
		effect = {
			if = {
				limit = {
					always = no #Readd with an Australian revamp
					ROOT = {
						original_tag = INS
						NOT = { has_government = fascism }
					}
					FROM = {
						original_tag = INS
						has_government = fascism
					}
					AST = {
						#has_completed_focus = AST_support_indonesian_uprising
					}
				}
				AST = {
					country_event = { 
						id = tfv_australia.41 
						hours = 12
					}
				}
			}
		}
		
	}

	#ROOT is subject FROM is previous overlord
	on_subject_free = {
		effect = {
			#Achievement
			if = {
				limit = {
					FROM = {
						original_tag = SAF
					}
				}
				if = {
					limit = {
						tag = ANG
					}
					set_country_flag = SAF_released_ANG
				}
				if = {
					limit = {
						tag = MZB
					}
					set_country_flag = SAF_released_MZB
				}
				if = {
					limit = {
						tag = BOT
					}
					set_country_flag = SAF_released_BOT
				}
				if = {
					limit = {
						tag = ZIM
					}
					set_country_flag = SAF_released_ZIM
				}
				if = {
					limit = {
						tag = KEN
					}
					set_country_flag = SAF_released_KEN
				}
				if = {
					limit = {
						tag = COG
					}
					set_country_flag = SAF_released_COG
				}
			}
		}
	}

	#ROOT is subject FROM is overlord
	on_subject_autonomy_level_change = {
		effect = {
			#Add to commonwealth tech group
			if = {
				limit = {
					OR = {
						has_autonomy_state = autonomy_colony
						has_autonomy_state = autonomy_dominion
					}
					OVERLORD = { is_in_tech_sharing_group = commonwealth_research }
				}
				add_to_tech_sharing_group = commonwealth_research				
			}

			if = {
				limit = {
					tag = RAJ
					has_autonomy_state = autonomy_dominion
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
				add_popularity = {
					ideology = neutrality
					popularity = -1
				}
			}
		}
	}

	#ROOT is subject FROM is overlord
	on_subject_annexed = {

	}

	#used when puppeting in a peace conference
	#ROOT = nation being puppeted, FROM = overlord
	on_puppet = {
		effect = {
			if = {
				limit = {
					tag = HUN
					FROM = {
						has_country_flag = HUN_ROM_puppet_war #Romania only
					}
				}
				ROM = { set_country_flag = ROM_HUN_aligned }
			}
			if = {
				limit = { 
					OR = {
						TAG = SOV
						TAG = GER
					}
					SOV = { has_idea = SOV_molotov_ribbentrop_pact }
				}
				SOV = { remove_ideas = SOV_molotov_ribbentrop_pact } #the pact is OFF if one of them is a puppet
			}
			if = {
				limit = { 
					TAG = USA
					is_subject_of = ENG
					}
				set_cosmetic_tag = USA_UK
			}
			if = {
				limit = { 
					TAG = USA
					is_subject_of = SAF
					SAF = { has_idea = SAF_king_edward }
				}
				set_cosmetic_tag = USA_SAF_EDW
			}
			if = {
				limit = { 
					TAG = UKR
					is_subject_of = GER
					GER = { has_government = fascism }
				}
				set_cosmetic_tag = UKR_GER
			}
			if = {
				limit = { 
					TAG = UKR
					is_subject_of = SOV
					SOV = { has_government = communism }
				}
				set_cosmetic_tag = UKR_SOV
			}
			if = {
				limit = { 
					TAG = BLR
					is_subject_of = GER
					GER = { has_government = fascism }
				}
				set_cosmetic_tag = BLR_GER
			}
			if = {
				limit = {
					TAG = CZE
					SLO = { exists = yes }
				}
				CZE = { set_cosmetic_tag = CZE_ONLY } #cosmetic tag for CZE if Slovakia exists
			}
		}
	}

	#used when puppeting through the occupied territories menu during peace time (or when releasing from non-core but owned territory, f.e. Britain releasing Egypt)
	#ROOT = nation being released, FROM = overlord
	on_release_as_puppet = {
		effect = {
			if = {
				limit = {
					tag = HUN
					FROM = {
						has_country_flag = HUN_ROM_puppet_war #Romania only
					}
				}
				ROM = { set_country_flag = ROM_HUN_aligned }
			}
			if = {
				limit = { 
					OR = {
						TAG = SOV
						TAG = GER
					}
					SOV = { has_idea = SOV_molotov_ribbentrop_pact }
				}
				SOV = { remove_ideas = SOV_molotov_ribbentrop_pact } #the pact is OFF if one of them is a puppet
			}
			if = {
				limit = { 
					TAG = USA
					is_subject_of = ENG
					}
				set_cosmetic_tag = USA_UK
			}
			if = {
				limit = { 
					TAG = USA
					is_subject_of = SAF
					SAF = { has_idea = SAF_king_edward }
				}
				set_cosmetic_tag = USA_SAF_EDW
			}
			if = {
				limit = { 
					TAG = UKR
					is_subject_of = GER
					GER = { has_government = fascism }
				}
				set_cosmetic_tag = UKR_GER
			}
			if = {
				limit = { 
					TAG = UKR
					is_subject_of = SOV
					SOV = { has_government = communism }
				}
				set_cosmetic_tag = UKR_SOV
			}
			if = {
				limit = { 
					TAG = BLR
					is_subject_of = GER
					GER = { has_government = fascism }
				}
				set_cosmetic_tag = BLR_GER
			}
			if = {
				limit = {
					TAG = CZE
					SLO = { exists = yes }
				}
				CZE = { set_cosmetic_tag = CZE_ONLY } #cosmetic tag for CZE if Slovakia exists
			}
		}
	}

	#ROOT is free nation FROM is releaser
	on_release_as_free = { 

		# Making sure Quebec City becomes the Capital of Quebec
		effect = {
			IF = {
				limit = {
					ROOT = {
						tag = QUE
						owns_state = 468
					}
				}
				468 = {
					set_victory_points = {
						province = 4345
						value = 15
					}

					set_victory_points = {
						province = 12149
						value = 20
					}
				}	
			}
		}

	}

	# ROOT is the nation being released, FROM is the overlord
	on_release_as_puppet = {

		# Making sure Quebec City becomes the Capital of Quebec
	    effect = {
	    	IF = {
	    		limit = {
	    			ROOT = {
	    				tag = QUE
	    				owns_state = 468
	    			}
	    		}
	    		468 = {
	    			set_victory_points = {
	    				province = 4345
	    				value = 15
	    			}

	    			set_victory_points = {
	    				province = 12149
	    				value = 20
	    			}
	    		}	
	    	}
	    }
	}
	

}